# M√≥dulo 5b: DevOps y AWS para Data Engineering

## Introducci√≥n

Bienvenido al m√≥dulo de DevOps y AWS para Data Engineering. En este m√≥dulo aprender√°s las pr√°cticas y herramientas esenciales para llevar tus pipelines de datos y aplicaciones de IA a producci√≥n de manera confiable, automatizada y escalable en AWS.

## Objetivos del M√≥dulo

Al finalizar este m√≥dulo, ser√°s capaz de:

- üéØ Comprender los principios fundamentales de DevOps aplicados a Data Engineering
- üéØ Implementar Infrastructure as Code (IaC) con Terraform
- üéØ Desplegar aplicaciones containerizadas con Docker, ECS y Fargate
- üéØ Configurar bases de datos gestionadas con Amazon RDS
- üéØ Automatizar despliegues con CI/CD usando GitHub Actions y AWS CodePipeline
- üéØ Gestionar redes, seguridad y accesos con VPC, Security Groups e IAM
- üéØ Implementar monitoreo y observabilidad con CloudWatch
- üéØ Aplicar pr√°cticas de gesti√≥n de secretos con AWS Secrets Manager
- üéØ Entender el paso de herramientas open source a soluciones enterprise

## ¬øPor qu√© es importante?

En producci√≥n, no basta con que tu c√≥digo funcione localmente. Necesitas:
- **Infraestructura reproducible**: Crear y destruir entornos de manera consistente
- **Despliegues automatizados**: Reducir errores humanos y acelerar el time-to-market
- **Escalabilidad**: Manejar cargas variables sin intervenci√≥n manual
- **Observabilidad**: Detectar y resolver problemas r√°pidamente
- **Seguridad**: Proteger datos sensibles y cumplir regulaciones

**Dato importante**: Las empresas que adoptan DevOps despliegan 46 veces m√°s frecuentemente y tienen una tasa de falla 5 veces menor.

## Gu√≠a R√°pida

### Prerrequisitos
- Cuenta de AWS (free tier es suficiente para los ejemplos)
- Docker instalado localmente
- Terraform instalado (v1.0+)
- AWS CLI configurado
- Git y GitHub account

### Estructura del M√≥dulo
```
05b-devops-aws/
‚îú‚îÄ‚îÄ README.md                          # Este archivo
‚îú‚îÄ‚îÄ actividad-interactiva.md           # Ejercicios pr√°cticos
‚îú‚îÄ‚îÄ progreso.md                        # Tu registro de avance
‚îú‚îÄ‚îÄ retroalimentacion.md               # Soluciones y explicaciones
‚îî‚îÄ‚îÄ examples/
    ‚îú‚îÄ‚îÄ terraform/                     # Ejemplos de IaC
    ‚îÇ   ‚îú‚îÄ‚îÄ main.tf                    # Recursos principales (VPC, ECS, RDS)
    ‚îÇ   ‚îú‚îÄ‚îÄ variables.tf               # Variables configurables
    ‚îÇ   ‚îî‚îÄ‚îÄ outputs.tf                 # Outputs √∫tiles
    ‚îú‚îÄ‚îÄ docker/                        # Dockerfile ejemplo
    ‚îÇ   ‚îî‚îÄ‚îÄ Dockerfile                 # Imagen Python para ECS
    ‚îî‚îÄ‚îÄ .github/workflows/             # CI/CD
        ‚îî‚îÄ‚îÄ ci-cd-infra.yml            # Pipeline de ejemplo
```

## Temas Cubiertos

### 1. Infrastructure as Code (IaC)

#### Terraform
- Declaraci√≥n de recursos de AWS (provider, VPC, subnets, security groups)
- Gesti√≥n de estado y workspaces
- M√≥dulos reutilizables
- Best practices para equipos

**Comparaci√≥n con alternativas:**
- **AWS CDK**: M√°s program√°tico, integrado con AWS
- **CloudFormation**: Nativo de AWS, m√°s verboso
- **Pulumi**: Multi-cloud, lenguajes de programaci√≥n completos

**Archivo de ejemplo**: `examples/terraform/main.tf`

#### Ansible (Conceptos)
- Automatizaci√≥n de configuraci√≥n
- Playbooks para setup de servidores
- Cu√°ndo usar Ansible vs Terraform

### 2. Containerizaci√≥n y Orquestaci√≥n

#### Docker
- Creaci√≥n de im√°genes optimizadas para producci√≥n
- Multi-stage builds para reducir tama√±o
- Health checks y se√±ales de graceful shutdown
- **Archivo de ejemplo**: `examples/docker/Dockerfile`

#### Amazon ECS + Fargate
- Task definitions y servicios
- Fargate vs EC2 launch type
- Network configuration y service discovery
- Auto-scaling basado en m√©tricas
- **C√≥digo**: Ver `main.tf` - recursos `aws_ecs_cluster`, `aws_ecs_task_definition`, `aws_ecs_service`

### 3. Bases de Datos Gestionadas

#### Amazon RDS (PostgreSQL)
- Configuraci√≥n de subnet groups
- Security groups y acceso controlado
- Backups autom√°ticos y recuperaci√≥n
- Monitoring de performance
- **C√≥digo**: Ver `main.tf` - recursos `aws_db_subnet_group`, `aws_db_instance`

### 4. CI/CD: Integraci√≥n y Despliegue Continuo

#### GitHub Actions
- Workflows automatizados
- Terraform plan/apply en PRs
- Build y push de im√°genes Docker a ECR
- Deploy a ECS service
- **Archivo de ejemplo**: `examples/.github/workflows/ci-cd-infra.yml`

#### AWS CodePipeline (Conceptos)
- Pipelines nativos de AWS
- Integraci√≥n con CodeBuild y CodeDeploy
- Blue/green deployments

### 5. Networking y Seguridad

#### VPC (Virtual Private Cloud)
- Subnets p√∫blicas y privadas
- Internet Gateway y NAT Gateway
- Route tables
- **C√≥digo**: Ver configuraci√≥n VPC en `main.tf`

#### IAM (Identity and Access Management)
- Roles para servicios (ECS Task Role, ECS Execution Role)
- Pol√≠ticas de m√≠nimo privilegio
- Service-linked roles

#### Security Groups
- Reglas de entrada y salida
- Principio de least privilege
- Segmentaci√≥n por capas (ALB, ECS, RDS)

#### AWS Secrets Manager
- Almacenamiento seguro de credenciales
- Rotaci√≥n autom√°tica de secretos
- Integraci√≥n con ECS y RDS

### 6. Observabilidad y Monitoreo

#### CloudWatch
- Logs centralizados
- M√©tricas de infraestructura y aplicaci√≥n
- Alarmas y notificaciones
- Dashboards personalizados

#### Alternativas Enterprise
- **Splunk**: SIEM y an√°lisis avanzado de logs
- **Datadog**: Monitoreo unificado multi-cloud
- **New Relic**: APM y observabilidad de aplicaciones

### 7. Servicios de Datos AWS

#### AWS Glue
- Data catalog y ETL serverless
- Crawlers para descubrimiento de datos
- Integraci√≥n con S3 y RDS

#### Amazon Athena
- Queries SQL sobre S3
- Serverless, pay-per-query
- Integraci√≥n con Glue catalog

## C√≥mo Usar los Ejemplos

### Paso 1: Revisar el C√≥digo Terraform

```bash
cd examples/terraform/
cat main.tf variables.tf outputs.tf
```

Lee los comentarios para entender cada recurso y su prop√≥sito.

### Paso 2: Configurar Variables

Crea un archivo `terraform.tfvars` (NO lo subas a git):

```hcl
aws_region      = "us-east-1"
project_name    = "mi-proyecto"
db_username     = "admin"
db_password     = "ChangeMe123!"  # Usa Secrets Manager en producci√≥n
ecr_image       = "123456789012.dkr.ecr.us-east-1.amazonaws.com/mi-app:latest"
```

### Paso 3: Inicializar y Validar

```bash
terraform init
terraform fmt
terraform validate
terraform plan
```

### Paso 4: Aplicar Cambios (Opcional)

**‚ö†Ô∏è ATENCI√ìN**: Esto crear√° recursos reales en AWS que pueden generar costos.

```bash
terraform apply
```

### Paso 5: Limpiar Recursos

```bash
terraform destroy
```

## De Open Source a Enterprise

| Aspecto | Open Source | Enterprise (AWS) |
|---------|-------------|------------------|
| **IaC** | Terraform (OSS) | Terraform Enterprise, AWS CDK |
| **Containers** | Docker, Docker Compose | Amazon ECS, EKS (Kubernetes) |
| **Orchestration** | Kubernetes (self-managed) | Amazon EKS, ECS Fargate |
| **CI/CD** | GitHub Actions, GitLab CI | AWS CodePipeline, Jenkins Enterprise |
| **Monitoring** | Prometheus + Grafana | CloudWatch, Datadog, Splunk |
| **Secrets** | HashiCorp Vault (OSS) | AWS Secrets Manager, Vault Enterprise |
| **Databases** | PostgreSQL (self-hosted) | Amazon RDS, Aurora |
| **ETL** | Apache Airflow (self-hosted) | AWS Glue, Airflow en MWAA |
| **Data Lake** | MinIO, HDFS | Amazon S3 |
| **Networking** | VPN, firewalls DIY | AWS VPC, Transit Gateway, PrivateLink |

### ¬øCu√°ndo elegir Open Source vs Enterprise?

**Open Source cuando**:
- Presupuesto limitado
- Control total sobre la infraestructura
- Flexibilidad para customizar
- Comunidad activa y soporte comunitario

**Enterprise/AWS cuando**:
- Necesitas soporte 24/7 con SLAs
- Escalabilidad sin gesti√≥n de infraestructura
- Compliance y certificaciones requeridas
- Tiempo al mercado es cr√≠tico
- Equipos peque√±os sin expertos en DevOps

### Habilidades Transferibles

Lo que aprendas con herramientas open source es **directamente aplicable** en entornos enterprise:
- Conceptos de containerizaci√≥n
- Principios de IaC
- Networking y seguridad
- Observabilidad y debugging
- CI/CD pipelines

La diferencia est√° en la **implementaci√≥n espec√≠fica**, no en los fundamentos.

## Recursos Adicionales

### Documentaci√≥n Oficial
- [Terraform AWS Provider](https://registry.terraform.io/providers/hashicorp/aws/latest/docs)
- [Amazon ECS Developer Guide](https://docs.aws.amazon.com/ecs/)
- [AWS Well-Architected Framework](https://aws.amazon.com/architecture/well-architected/)

### Tutoriales Recomendados
- [Getting Started with Terraform on AWS](https://learn.hashicorp.com/collections/terraform/aws-get-started)
- [ECS Workshop](https://ecsworkshop.com/)
- [AWS DevOps Blog](https://aws.amazon.com/blogs/devops/)

### Libros
- "Terraform: Up & Running" - Yevgeniy Brikman
- "The DevOps Handbook" - Gene Kim
- "Site Reliability Engineering" - Google

### Certificaciones
- AWS Certified DevOps Engineer - Professional
- AWS Certified Solutions Architect - Associate
- HashiCorp Certified: Terraform Associate

## Mejores Pr√°cticas

### Seguridad
- ‚úÖ Nunca hardcodees credenciales en c√≥digo
- ‚úÖ Usa AWS Secrets Manager o Parameter Store
- ‚úÖ Habilita MFA en cuentas AWS
- ‚úÖ Aplica principio de m√≠nimo privilegio
- ‚úÖ Escanea im√°genes Docker por vulnerabilidades
- ‚úÖ Rota credenciales regularmente

### Infraestructura
- ‚úÖ Usa m√≥dulos de Terraform reutilizables
- ‚úÖ Versiona tu c√≥digo de infraestructura
- ‚úÖ Mant√©n estados de Terraform en S3 con lock en DynamoDB
- ‚úÖ Usa workspaces para separar entornos (dev/staging/prod)
- ‚úÖ Implementa tags consistentes para recursos

### CI/CD
- ‚úÖ Ejecuta `terraform plan` en PRs antes de merge
- ‚úÖ Requiere aprobaci√≥n manual para `terraform apply` en producci√≥n
- ‚úÖ Automatiza tests de infraestructura
- ‚úÖ Mant√©n logs de todos los despliegues
- ‚úÖ Implementa rollback autom√°tico en fallos

### Costos
- ‚úÖ Usa Fargate para workloads variables
- ‚úÖ Implementa auto-scaling
- ‚úÖ Configura alarmas de presupuesto en AWS
- ‚úÖ Destruye recursos de dev/test cuando no se usen
- ‚úÖ Revisa AWS Cost Explorer mensualmente

## Pr√≥ximos Pasos

1. **Lee el README completo** (este archivo)
2. **Revisa los ejemplos de c√≥digo** en `examples/`
3. **Completa la actividad interactiva** en `actividad-interactiva.md`
4. **Documenta tu progreso** en `progreso.md`
5. **Consulta las soluciones** en `retroalimentacion.md`

## Consejos para el Aprendizaje

- üí° No intentes aplicar todo a producci√≥n de inmediato
- üí° Empieza con peque√±os experimentos en entornos de desarrollo
- üí° Lee y entiende los mensajes de error de Terraform
- üí° Usa `terraform plan` frecuentemente antes de `apply`
- üí° Mant√©n copias de seguridad del state file de Terraform
- üí° Aprende a leer la documentaci√≥n oficial de AWS

---

**¬øListo para comenzar?**

Dir√≠gete a [actividad-interactiva.md](actividad-interactiva.md) para poner en pr√°ctica estos conceptos con ejercicios guiados.

**¬°DevOps es cultura, no solo herramientas!** üöÄüîß‚òÅÔ∏è
